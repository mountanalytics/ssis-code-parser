LABEL_NODE,ID,FUNCTION,JOIN_ARG,SPLIT_ARG,NAME_NODE,FILTER,COLOR,_merge
FTP_Unpivot,0,DataSources,,,FTP_Unpivot,,#42d6a4,left_only
query_Package\FTP_unvipot_1,1,query,[],,query_Package\FTP_unvipot_1,"[""WHERE (Level_4 equals 'Fixed Rate Mortgages'"", ""and Forward_Starting equals 'FS'"", ""and Funding_space_Component is one of 'Basefundinginterest', 'Principal', 'Total Value'"", ""and NOT market_shock is one of 'Book Value', 'Face Amount', 'Net WAC', 'WAL_0')"", ""or (instrument_set equals 'Mortgage Proposal'"", ""and Funding_space_Component is one of 'Basefundinginterest', 'Principal', 'Total Value'"", ""and NOT market_shock is one of 'Book Value', 'Face Amount', 'Net WAC', 'WAL_0')"", ""and (Portfolio ends with 'OBV'"", ""or Portfolio ends with 'ABB')""]",#db59a5,left_only
FTP_Unpivot,2,DataSources,,,FTP_Unpivot,,#42d6a4,left_only
query_Package\FTP_unvipot_2,3,query,[],,query_Package\FTP_unvipot_2,"[""WHERE (Level_4 equals 'Fixed Rate Mortgages'"", ""and instrumnet_set is one of 'mortgage', 'offset mortgage'"", ""and external_counterparty_segment equals 'households'"", ""and (market_shock ends with 'SOT'"", ""or market_shock ends with 'EVEatR'))"", ""or (Level_4 equals 'Fixed Rate Mortgage Savings'"", ""and instrument_set equals 'mortgage savings'"", ""and (market_shock ends with 'SOT'"", ""or market_shock ends with 'EVEatR'))"", ""and (Portfolio ends with 'OBV'"", ""or Portfolio ends with 'ABB')""]",#db59a5,left_only
REP_Discount_Factors,4,DataSources,,,REP_Discount_Factors,,#d0d3d3,left_only
query_Package\Delete_discount_factors_2,5,query,,,query_Package\Delete_discount_factors_2,DELETE WHERE Market equals '12/31/2021',#db59a5,left_only
REP_Master_GAP,6,DataSources,,,REP_Master_GAP,,#d0d3d3,left_only
query_Package\del_master_gap_2,7,query,,,query_Package\del_master_gap_2,DELETE WHERE Entity equals CASE WHEN 'TRG' equals 'BWF' THEN 'BPD' ELSE 'TRG' END and Source equals 'QRM' and Market_as_of_date equals '3/31/2016',#db59a5,left_only
User::Port_current,8,variable,,,User::Port_current,,#D0D708,left_only
User::Market_date,9,variable,,,User::Market_date,,#D0D708,left_only
User::Matchgap,10,variable,,,User::Matchgap,,#D0D708,left_only
User::Comp_Name,11,variable,,,User::Comp_Name,,#D0D708,left_only
5/31/2024,12,variable,,,5/31/2024,,#D0D708,left_only
OBV,13,variable,,,OBV,,#D0D708,left_only
0,14,variable,,,0,,#D0D708,left_only
@DataSetEmpty,15,query,,,@DataSetEmpty,"IF NOT EXISTS (
	SELECT 1
	FROM exp.MDSStoBETValuationResult
	WHERE Entity = @Entity
	and CONVERT(date, PortfolioAsOfDate) = CONVERT(date, @PortfolioCurrent)
)
SET @DataSetEmpty = 1",#db59a5,left_only
Package\RecordCount@subquery_3,16,subquery,[],,subquery_3,,#d0d3d3,left_only
FTP_Unpivot,17,DataSources,,,FTP_Unpivot,,#42d6a4,left_only
Package\RecordCount@subquery_2,18,subquery,[],,subquery_2,,#d0d3d3,left_only
FTP_Shocks,19,DataSources,,,FTP_Shocks,,#42d6a4,left_only
Package\RecordCount@subquery_1,20,subquery,[],,subquery_1,,#d0d3d3,left_only
FTP_Base,21,DataSources,,,FTP_Base,,#42d6a4,left_only
query_User::RecordCount,22,query,"['JOIN (subquery_2) AS FSH ON 1 = 1', 'JOIN (subquery_3) AS FUP ON 1 = 1']",,query_User::RecordCount,,#9D94FF,left_only
User::RecordCount,23,variable,,,User::RecordCount,,#D0D708,left_only
Package\RecordCount@(subquery_1),24,subquery,"['JOIN (subquery_2) AS FSH ON 1 = 1', 'JOIN (subquery_3) AS FUP ON 1 = 1']",,(subquery_1),,#d0d3d3,left_only
Package\RecordCount@(subquery_2),25,subquery,"['JOIN (subquery_2) AS FSH ON 1 = 1', 'JOIN (subquery_3) AS FUP ON 1 = 1']",,(subquery_2),,#d0d3d3,left_only
Package\RecordCount@(subquery_3),26,subquery,"['JOIN (subquery_2) AS FSH ON 1 = 1', 'JOIN (subquery_3) AS FUP ON 1 = 1']",,(subquery_3),,#d0d3d3,left_only
User::Product,27,variable,,,User::Product,,#D0D708,left_only
User::Period,28,variable,,,User::Period,,#D0D708,left_only
User::FileID,29,variable,,,User::FileID,,#D0D708,left_only
query_User::New_table_long,30,query,"['INNER JOIN dbo.tbl_Product_file AS PF ON dbo.tbl_Product.Product_id = dbo.tbl_Product_file.Product_id AND dbo.tbl_Product.Period = dbo.tbl_Product_file.Period', 'LEFT JOIN dbo.tbl_File_State AS FS ON dbo.tbl_Product_file.Product_id = dbo.tbl_File_State.Product_id AND dbo.tbl_Product_file.Period = dbo.tbl_File_State.Period AND dbo.tbl_Product_file.File_id = dbo.tbl_File_State.File_id', 'INNER JOIN dbo.tbl_Product_parameter AS PP1 ON dbo.tbl_Product_file.Product_id = dbo.tbl_Product_parameter.Product_id AND dbo.tbl_Product_file.Period = dbo.tbl_Product_parameter.Period', ""INNER JOIN dbo.tbl_Product_parameter AS PP2 ON dbo.tbl_Product_parameter.Product_id = 'GEN' AND dbo.tbl_Product_file.Period = dbo.tbl_Product_parameter.Period"", ""INNER JOIN dbo.tbl_Product_parameter AS PP3 ON dbo.tbl_Product_parameter.Product_id = 'GEN' AND dbo.tbl_Product_file.Period = dbo.tbl_Product_parameter.Period AND dbo.tbl_Product_file.Period = dbo.tbl_Product_parameter.Period""]",,query_User::New_table_long,dbo.tbl_Product_parameter.Action_Take = 'Portdate' AND dbo.tbl_Product_parameter.Action_Take = 'ReportingDatabase' AND dbo.tbl_Product_parameter.Action_Take = 'ReportingServer' AND dbo.tbl_Product.Product_id = @@User_doublecolumns_Product AND dbo.tbl_Product.Period = @@User_doublecolumns_Period AND dbo.tbl_Product_file.File_id = @@User_doublecolumns_FileID,#db59a5,left_only
User::New_table_long,31,variable,,,User::New_table_long,,#D0D708,left_only
tbl_Product,32,DataSources,,,tbl_Product,,#42d6a4,left_only
tbl_Product_file,33,DataSources,,,tbl_Product_file,,#42d6a4,left_only
tbl_File_State,34,DataSources,,,tbl_File_State,,#42d6a4,left_only
tbl_Product_parameter,35,DataSources,,,tbl_Product_parameter,,#42d6a4,left_only
tbl_Product_parameter,36,DataSources,,,tbl_Product_parameter,,#42d6a4,left_only
tbl_Product_parameter,37,DataSources,,,tbl_Product_parameter,,#42d6a4,left_only
Package\rec_count@subquery_5,38,subquery,[],,subquery_5,,#d0d3d3,left_only
GAP,39,DataSources,,,GAP,,#42d6a4,left_only
Package\rec_count@subquery_4,40,subquery,[],,subquery_4,,#d0d3d3,left_only
Forecast_Periods,41,DataSources,,,Forecast_Periods,,#42d6a4,left_only
Package\rec_count@subquery_3,42,subquery,[],,subquery_3,,#d0d3d3,left_only
Account_Dimension,43,DataSources,,,Account_Dimension,,#42d6a4,left_only
Package\rec_count@subquery_2,44,subquery,[],,subquery_2,,#d0d3d3,left_only
Run_Time_Description,45,DataSources,,,Run_Time_Description,,#42d6a4,left_only
Package\rec_count@subquery_1,46,subquery,[],,subquery_1,,#d0d3d3,left_only
PlanningDimentsions,47,DataSources,,,PlanningDimentsions,,#42d6a4,left_only
query_User::Rec_cnt,48,query,"['JOIN (subquery_2) AS RTD ON 1 = 1', 'JOIN (subquery_3) AS ACD ON 1 = 1', 'JOIN (subquery_4) AS FOP ON 1 = 1', 'JOIN (subquery_5) AS GAP ON 1 = 1']",,query_User::Rec_cnt,,#9D94FF,left_only
User::Rec_cnt,49,variable,,,User::Rec_cnt,,#D0D708,left_only
Package\rec_count@(subquery_1),50,subquery,"['JOIN (subquery_2) AS RTD ON 1 = 1', 'JOIN (subquery_3) AS ACD ON 1 = 1', 'JOIN (subquery_4) AS FOP ON 1 = 1', 'JOIN (subquery_5) AS GAP ON 1 = 1']",,(subquery_1),,#d0d3d3,left_only
Package\rec_count@(subquery_2),51,subquery,"['JOIN (subquery_2) AS RTD ON 1 = 1', 'JOIN (subquery_3) AS ACD ON 1 = 1', 'JOIN (subquery_4) AS FOP ON 1 = 1', 'JOIN (subquery_5) AS GAP ON 1 = 1']",,(subquery_2),,#d0d3d3,left_only
Package\rec_count@(subquery_3),52,subquery,"['JOIN (subquery_2) AS RTD ON 1 = 1', 'JOIN (subquery_3) AS ACD ON 1 = 1', 'JOIN (subquery_4) AS FOP ON 1 = 1', 'JOIN (subquery_5) AS GAP ON 1 = 1']",,(subquery_3),,#d0d3d3,left_only
Package\rec_count@(subquery_4),53,subquery,"['JOIN (subquery_2) AS RTD ON 1 = 1', 'JOIN (subquery_3) AS ACD ON 1 = 1', 'JOIN (subquery_4) AS FOP ON 1 = 1', 'JOIN (subquery_5) AS GAP ON 1 = 1']",,(subquery_4),,#d0d3d3,left_only
Package\rec_count@(subquery_5),54,subquery,"['JOIN (subquery_2) AS RTD ON 1 = 1', 'JOIN (subquery_3) AS ACD ON 1 = 1', 'JOIN (subquery_4) AS FOP ON 1 = 1', 'JOIN (subquery_5) AS GAP ON 1 = 1']",,(subquery_5),,#d0d3d3,left_only
LKP_Counterparty,55,DataSources,,,LKP_Counterparty,,#42d6a4,left_only
GAP,56,DataSources,,,GAP,,#42d6a4,left_only
GAP,57,DataSources,,,GAP,,#42d6a4,left_only
GAP,58,DataSources,,,GAP,,#42d6a4,left_only
query_Package\Update_GAP_1,59,query,"['LEFT JOIN cfg.LKP_Counterparty AS cp ON cp.Intercompany_Legal_Entity = staging.GAP.Intercompany_Legal_Entity', 'AND cp.Intercompany_Counterparty = staging.GAP.Intercompany_Counterparty']",,query_Package\Update_GAP_1,,#9D94FF,left_only
GAP_DCF_Intermediate,60,DataSources,,,GAP_DCF_Intermediate,,#42d6a4,left_only
query_Package\GAP_DCF_1,61,query,[],,query_Package\GAP_DCF_1,"[""WHERE ((Level_04 equals 'Fixed Rate Mortgages'"", ""and Forward_Starting equals 'FS'"", ""and Funding_Component_Mapping_ID is one of 'Base funding interest', 'Principal', 'Total Value')"", ""or (instrument_set equals 'Mortgage Proposal'"", ""and Funding_Component_Mapping_ID is one of 'Base funding interest', 'Principal', 'Total Value'))"", ""and (Entity is one of 'OBV', 'ABB')""]",#db59a5,left_only
User::Product,62,variable,,,User::Product,,#D0D708,left_only
User::Period,63,variable,,,User::Period,,#D0D708,left_only
User::FileID,64,variable,,,User::FileID,,#D0D708,left_only
query_User::Table_joins,65,query,"['INNER JOIN dbo.tbl_Product_file AS PF ON dbo.tbl_Product.Product_id = dbo.tbl_Product_file.Product_id AND dbo.tbl_Product.Period = dbo.tbl_Product_file.Period', 'LEFT JOIN dbo.tbl_File_State AS FS ON dbo.tbl_Product_file.Product_id = dbo.tbl_File_State.Product_id AND dbo.tbl_Product_file.Period = dbo.tbl_File_State.Period AND dbo.tbl_Product_file.File_id = dbo.tbl_File_State.File_id', 'INNER JOIN dbo.tbl_Product_parameter AS PP1 ON dbo.tbl_Product_file.Product_id = dbo.tbl_Product_parameter.Product_id AND dbo.tbl_Product_file.Period = dbo.tbl_Product_parameter.Period', ""INNER JOIN dbo.tbl_Product_parameter AS PP2 ON dbo.tbl_Product_parameter.Product_id = 'GEN' AND dbo.tbl_Product_file.Period = dbo.tbl_Product_parameter.Period"", ""INNER JOIN dbo.tbl_Product_parameter AS PP3 ON dbo.tbl_Product_parameter.Product_id = 'GEN' AND dbo.tbl_Product_file.Period = dbo.tbl_Product_parameter.Period""]",,query_User::Table_joins,dbo.tbl_Product_parameter.Action_Take = 'Portdate' AND dbo.tbl_Product.Product_id = @@User_doublecolumns_Product AND dbo.tbl_Product.Period = @@User_doublecolumns_Period AND dbo.tbl_Product_file.File_id = @@User_doublecolumns_FileID AND dbo.tbl_Product_parameter.Action_Take = 'ReportingDatabase' AND dbo.tbl_Product_parameter.Action_Take = 'ReportingServer',#db59a5,left_only
User::Table_joins,66,variable,,,User::Table_joins,,#D0D708,left_only
tbl_Product,67,DataSources,,,tbl_Product,,#42d6a4,left_only
tbl_Product_file,68,DataSources,,,tbl_Product_file,,#42d6a4,left_only
tbl_File_State,69,DataSources,,,tbl_File_State,,#42d6a4,left_only
tbl_Product_parameter,70,DataSources,,,tbl_Product_parameter,,#42d6a4,left_only
tbl_Product_parameter,71,DataSources,,,tbl_Product_parameter,,#42d6a4,left_only
tbl_Product_parameter,72,DataSources,,,tbl_Product_parameter,,#42d6a4,left_only
