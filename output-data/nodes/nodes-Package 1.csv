NAME_NODE,LABEL_NODE,FILTER,FUNCTION,JOIN_ARG,COLOR,ID
staging.FTP_Unpivot,staging.FTP_Unpivot,,DataSources,,#42d6a4,0
query_Package\FTP_unvipot_1,query_Package\FTP_unvipot_1,"WHERE (Level_4 = 'Fixed Rate Mortgages' AND Forward_Starting = 'FS' AND Funding_space_Component IS ONE OF ('Basefundinginterest', 'Principal', 'Total Value') AND market_shock IS NOT ONE OF ('Book Value', 'Face Amount', 'Net WAC', 'WAL_0')) OR (instrument_set = 'Mortgage Proposal' AND Funding_space_Component IS ONE OF ('Basefundinginterest', 'Principal', 'Total Value') AND market_shock IS NOT ONE OF ('Book Value', 'Face Amount', 'Net WAC', 'WAL_0')) AND (Portfolio ENDS WITH 'OBV' OR Portfolio ENDS WITH 'ABB')",query,None,#db59a5,1
staging.FTP_Unpivot,staging.FTP_Unpivot,,DataSources,,#42d6a4,2
query_Package\FTP_unvipot_2,query_Package\FTP_unvipot_2,"WHERE (Level_4 = 'Fixed Rate Mortgages' AND instrumnet_set IS ONE OF ('mortgage', 'offset mortgage') AND external_counterparty_segment = 'households' AND (market_shock ENDS WITH 'SOT' OR market_shock ENDS WITH 'EVEatR')) OR (Level_4 = 'Fixed Rate Mortgage Savings' AND instrument_set = 'mortgage savings' AND (market_shock ENDS WITH 'SOT' OR market_shock ENDS WITH 'EVEatR')) AND (Portfolio ENDS WITH 'OBV' OR Portfolio ENDS WITH 'ABB')",query,None,#db59a5,3
dbo.REP_Discount_Factors,dbo.REP_Discount_Factors,,DataSources,,#42d6a4,4
query_Package\Delete_discount_factors_2,query_Package\Delete_discount_factors_2,DELETE WHERE Market = '12/31/2021',delete table where,,#3270C0,5
dbo.REP_Master_GAP,dbo.REP_Master_GAP,,DataSources,,#42d6a4,6
query_Package\del_master_gap_2,query_Package\del_master_gap_2,"DELETE WHERE Entity = IF 'TRG' = 'BWF', THEN 'BPD', ELSE 'TRG' AND Source = 'QRM' AND Market_as_of_date = '3/31/2016'",delete table where,,#3270C0,7
User::Port_current,User::Port_current,,variable,,#D0D708,8
User::Market_date,User::Market_date,,variable,,#D0D708,9
User::Matchgap,User::Matchgap,,variable,,#D0D708,10
User::Comp_Name,User::Comp_Name,,variable,,#D0D708,11
subquery_1_Package\select_res,Package\select_res@subquery_1_Package\select_res,QRM.Run_Time_Description.CompanyName = User::Comp_Name AND QRM.Run_Time_Description.Portfolio = User::Port_current,subquery,,#db59a5,12
QRM.Run_Time_Description,QRM.Run_Time_Description,,DataSources,,#42d6a4,13
query_User::Run_time_descip,query_User::Run_time_descip,1 = 1 AND QRM.Run_Time_Description.Portfolio = User::Port_current AND (CONVERT QRM.Run_Time_Description.Market TO DATE) = (CONVERT User::Market_date TO DATE) AND QRM.Run_Time_Description.Strategy CONTAINS User::Matchgap AND QRM.Run_Time_Description.CompanyName = User::Comp_Name AND QRM.Run_Time_Description.DateTimeStamp = (subquery_1_Package\select_res),query,,#db59a5,14
User::Run_time_descip,User::Run_time_descip,,variable,,#D0D708,15
QRM.Run_Time_Description,QRM.Run_Time_Description,,DataSources,,#42d6a4,16
PortfolioCurrent,PortfolioCurrent,'5/31/2024',variable,,#db59a5,17
Entity,Entity,'OBV',variable,,#db59a5,18
DataSetEmpty,DataSetEmpty,0,variable,,#db59a5,19
@DataSetEmpty,@DataSetEmpty,"IF NOT EXISTS (
	SELECT 1
	FROM exp.MDSStoBETValuationResult
	WHERE Entity = @Entity
	and CONVERT(date, PortfolioAsOfDate) = CONVERT(date, @PortfolioCurrent)
)
SET @DataSetEmpty = 1",variable,,#db59a5,20
subquery_3_Package\RecordCount,Package\RecordCount@subquery_3_Package\RecordCount,,subquery,,#d0d3d3,21
staging.FTP_Unpivot,staging.FTP_Unpivot,,DataSources,,#42d6a4,22
subquery_2_Package\RecordCount,Package\RecordCount@subquery_2_Package\RecordCount,,subquery,,#d0d3d3,23
staging.FTP_Shocks,staging.FTP_Shocks,,DataSources,,#42d6a4,24
subquery_1_Package\RecordCount,Package\RecordCount@subquery_1_Package\RecordCount,,subquery,,#d0d3d3,25
staging.FTP_Base,staging.FTP_Base,,DataSources,,#42d6a4,26
query_User::RecordCount,query_User::RecordCount,,query,JOIN (subquery_2_Package\RecordCount) AS FSH ON 1 = 1 JOIN (subquery_3_Package\RecordCount) AS FUP ON 1 = 1,#9D94FF,27
User::RecordCount,User::RecordCount,,variable,,#D0D708,28
(subquery_1_Package\RecordCount),Package\RecordCount@(subquery_1_Package\RecordCount),,subquery,JOIN (subquery_2_Package\RecordCount) AS FSH ON 1 = 1 JOIN (subquery_3_Package\RecordCount) AS FUP ON 1 = 1,#d0d3d3,29
(subquery_2_Package\RecordCount),Package\RecordCount@(subquery_2_Package\RecordCount),,subquery,JOIN (subquery_2_Package\RecordCount) AS FSH ON 1 = 1 JOIN (subquery_3_Package\RecordCount) AS FUP ON 1 = 1,#d0d3d3,30
(subquery_3_Package\RecordCount),Package\RecordCount@(subquery_3_Package\RecordCount),,subquery,JOIN (subquery_2_Package\RecordCount) AS FSH ON 1 = 1 JOIN (subquery_3_Package\RecordCount) AS FUP ON 1 = 1,#d0d3d3,31
User::Product,User::Product,,variable,,#D0D708,32
User::Period,User::Period,,variable,,#D0D708,33
User::FileID,User::FileID,,variable,,#D0D708,34
query_User::New_table_long,query_User::New_table_long,dbo.tbl_Product_parameter.Action_Take = 'Portdate' AND dbo.tbl_Product_parameter.Action_Take = 'ReportingDatabase' AND dbo.tbl_Product_parameter.Action_Take = 'ReportingServer' AND dbo.tbl_Product.Product_id = User::Product AND dbo.tbl_Product.Period = User::Period AND dbo.tbl_Product_file.File_id = User::FileID,query,INNER JOIN dbo.tbl_Product_file AS PF ON dbo.tbl_Product.Product_id = dbo.tbl_Product_file.Product_id AND dbo.tbl_Product.Period = dbo.tbl_Product_file.Period LEFT JOIN dbo.tbl_File_State AS FS ON dbo.tbl_Product_file.Product_id = dbo.tbl_File_State.Product_id AND dbo.tbl_Product_file.Period = dbo.tbl_File_State.Period AND dbo.tbl_Product_file.File_id = dbo.tbl_File_State.File_id INNER JOIN dbo.tbl_Product_parameter AS PP1 ON dbo.tbl_Product_file.Product_id = dbo.tbl_Product_parameter.Product_id AND dbo.tbl_Product_file.Period = dbo.tbl_Product_parameter.Period INNER JOIN dbo.tbl_Product_parameter AS PP2 ON dbo.tbl_Product_parameter.Product_id = 'GEN' AND dbo.tbl_Product_file.Period = dbo.tbl_Product_parameter.Period INNER JOIN dbo.tbl_Product_parameter AS PP3 ON dbo.tbl_Product_parameter.Product_id = 'GEN' AND dbo.tbl_Product_file.Period = dbo.tbl_Product_parameter.Period AND dbo.tbl_Product_file.Period = dbo.tbl_Product_parameter.Period,#db59a5,35
User::New_table_long,User::New_table_long,,variable,,#D0D708,36
dbo.tbl_Product,dbo.tbl_Product,,DataSources,,#42d6a4,37
dbo.tbl_Product_file,dbo.tbl_Product_file,,DataSources,,#42d6a4,38
dbo.tbl_File_State,dbo.tbl_File_State,,DataSources,,#42d6a4,39
dbo.tbl_Product_parameter,dbo.tbl_Product_parameter,,DataSources,,#42d6a4,40
dbo.tbl_Product_parameter,dbo.tbl_Product_parameter,,DataSources,,#42d6a4,41
dbo.tbl_Product_parameter,dbo.tbl_Product_parameter,,DataSources,,#42d6a4,42
subquery_5_Package\rec_count,Package\rec_count@subquery_5_Package\rec_count,,subquery,,#d0d3d3,43
staging.GAP,staging.GAP,,DataSources,,#42d6a4,44
subquery_4_Package\rec_count,Package\rec_count@subquery_4_Package\rec_count,,subquery,,#d0d3d3,45
staging.Forecast_Periods,staging.Forecast_Periods,,DataSources,,#42d6a4,46
subquery_3_Package\rec_count,Package\rec_count@subquery_3_Package\rec_count,,subquery,,#d0d3d3,47
staging.Account_Dimension,staging.Account_Dimension,,DataSources,,#42d6a4,48
subquery_2_Package\rec_count,Package\rec_count@subquery_2_Package\rec_count,,subquery,,#d0d3d3,49
staging.Run_Time_Description,staging.Run_Time_Description,,DataSources,,#42d6a4,50
subquery_1_Package\rec_count,Package\rec_count@subquery_1_Package\rec_count,,subquery,,#d0d3d3,51
staging.PlanningDimentsions,staging.PlanningDimentsions,,DataSources,,#42d6a4,52
query_User::Rec_cnt,query_User::Rec_cnt,,query,JOIN (subquery_2_Package\rec_count) AS RTD ON 1 = 1 JOIN (subquery_3_Package\rec_count) AS ACD ON 1 = 1 JOIN (subquery_4_Package\rec_count) AS FOP ON 1 = 1 JOIN (subquery_5_Package\rec_count) AS GAP ON 1 = 1,#9D94FF,53
User::Rec_cnt,User::Rec_cnt,,variable,,#D0D708,54
(subquery_1_Package\rec_count),Package\rec_count@(subquery_1_Package\rec_count),,subquery,JOIN (subquery_2_Package\rec_count) AS RTD ON 1 = 1 JOIN (subquery_3_Package\rec_count) AS ACD ON 1 = 1 JOIN (subquery_4_Package\rec_count) AS FOP ON 1 = 1 JOIN (subquery_5_Package\rec_count) AS GAP ON 1 = 1,#d0d3d3,55
(subquery_2_Package\rec_count),Package\rec_count@(subquery_2_Package\rec_count),,subquery,JOIN (subquery_2_Package\rec_count) AS RTD ON 1 = 1 JOIN (subquery_3_Package\rec_count) AS ACD ON 1 = 1 JOIN (subquery_4_Package\rec_count) AS FOP ON 1 = 1 JOIN (subquery_5_Package\rec_count) AS GAP ON 1 = 1,#d0d3d3,56
(subquery_3_Package\rec_count),Package\rec_count@(subquery_3_Package\rec_count),,subquery,JOIN (subquery_2_Package\rec_count) AS RTD ON 1 = 1 JOIN (subquery_3_Package\rec_count) AS ACD ON 1 = 1 JOIN (subquery_4_Package\rec_count) AS FOP ON 1 = 1 JOIN (subquery_5_Package\rec_count) AS GAP ON 1 = 1,#d0d3d3,57
(subquery_4_Package\rec_count),Package\rec_count@(subquery_4_Package\rec_count),,subquery,JOIN (subquery_2_Package\rec_count) AS RTD ON 1 = 1 JOIN (subquery_3_Package\rec_count) AS ACD ON 1 = 1 JOIN (subquery_4_Package\rec_count) AS FOP ON 1 = 1 JOIN (subquery_5_Package\rec_count) AS GAP ON 1 = 1,#d0d3d3,58
(subquery_5_Package\rec_count),Package\rec_count@(subquery_5_Package\rec_count),,subquery,JOIN (subquery_2_Package\rec_count) AS RTD ON 1 = 1 JOIN (subquery_3_Package\rec_count) AS ACD ON 1 = 1 JOIN (subquery_4_Package\rec_count) AS FOP ON 1 = 1 JOIN (subquery_5_Package\rec_count) AS GAP ON 1 = 1,#d0d3d3,59
cfg.LKP_Counterparty,cfg.LKP_Counterparty,,DataSources,,#42d6a4,60
.staging.GAP,.staging.GAP,,DataSources,,#42d6a4,61
.staging.GAP,.staging.GAP,,DataSources,,#42d6a4,62
staging.GAP,staging.GAP,,DataSources,,#42d6a4,63
query_Package\Update_GAP_1,query_Package\Update_GAP_1,,query,"['LEFT JOIN cfg.LKP_Counterparty AS cp ON cp.Intercompany_Legal_Entity = staging.GAP.Intercompany_Legal_Entity', 'AND cp.Intercompany_Counterparty = staging.GAP.Intercompany_Counterparty']",#9D94FF,64
staging.GAP_DCF_Intermediate,staging.GAP_DCF_Intermediate,,DataSources,,#42d6a4,65
query_Package\GAP_DCF_1,query_Package\GAP_DCF_1,"WHERE ((Level_04 = 'Fixed Rate Mortgages' AND Forward_Starting = 'FS' AND Funding_Component_Mapping_ID IS ONE OF ('Base funding interest', 'Principal', 'Total Value')) OR (instrument_set = 'Mortgage Proposal' AND Funding_Component_Mapping_ID IS ONE OF ('Base funding interest', 'Principal', 'Total Value'))) AND (Entity IS ONE OF ('OBV', 'ABB'))",query,None,#db59a5,66
User::Product,User::Product,,variable,,#D0D708,67
User::Period,User::Period,,variable,,#D0D708,68
User::FileID,User::FileID,,variable,,#D0D708,69
query_User::Table_joins,query_User::Table_joins,dbo.tbl_Product_parameter.Action_Take = 'Portdate' AND dbo.tbl_Product.Product_id = User::Product AND dbo.tbl_Product.Period = User::Period AND dbo.tbl_Product_file.File_id = User::FileID AND dbo.tbl_Product_parameter.Action_Take = 'ReportingDatabase' AND dbo.tbl_Product_parameter.Action_Take = 'ReportingServer',query,INNER JOIN dbo.tbl_Product_file AS PF ON dbo.tbl_Product.Product_id = dbo.tbl_Product_file.Product_id AND dbo.tbl_Product.Period = dbo.tbl_Product_file.Period LEFT JOIN dbo.tbl_File_State AS FS ON dbo.tbl_Product_file.Product_id = dbo.tbl_File_State.Product_id AND dbo.tbl_Product_file.Period = dbo.tbl_File_State.Period AND dbo.tbl_Product_file.File_id = dbo.tbl_File_State.File_id INNER JOIN dbo.tbl_Product_parameter AS PP1 ON dbo.tbl_Product_file.Product_id = dbo.tbl_Product_parameter.Product_id AND dbo.tbl_Product_file.Period = dbo.tbl_Product_parameter.Period INNER JOIN dbo.tbl_Product_parameter AS PP2 ON dbo.tbl_Product_parameter.Product_id = 'GEN' AND dbo.tbl_Product_file.Period = dbo.tbl_Product_parameter.Period INNER JOIN dbo.tbl_Product_parameter AS PP3 ON dbo.tbl_Product_parameter.Product_id = 'GEN' AND dbo.tbl_Product_file.Period = dbo.tbl_Product_parameter.Period,#db59a5,70
User::Table_joins,User::Table_joins,,variable,,#D0D708,71
dbo.tbl_Product,dbo.tbl_Product,,DataSources,,#42d6a4,72
dbo.tbl_Product_file,dbo.tbl_Product_file,,DataSources,,#42d6a4,73
dbo.tbl_File_State,dbo.tbl_File_State,,DataSources,,#42d6a4,74
dbo.tbl_Product_parameter,dbo.tbl_Product_parameter,,DataSources,,#42d6a4,75
dbo.tbl_Product_parameter,dbo.tbl_Product_parameter,,DataSources,,#42d6a4,76
dbo.tbl_Product_parameter,dbo.tbl_Product_parameter,,DataSources,,#42d6a4,77
